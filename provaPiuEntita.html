<!DOCTYPE html>
<head>
<title>Wivr</title>
<script src="https://rawgit.com/aframevr/aframe/master/dist/aframe-master.min.js"></script> 
<script src="https://unpkg.com/aframe-curve-component/dist/aframe-curve-component.min.js"></script> 
<script src="js/collidable.js"></script>
<script src="js/three.js"></script>
</head>
 
<body>
  <a-scene id="scene">
    <a-camera>
        <a-cursor></a-cursor>
         <a-entity id='rc' laser-controls raycaster="objects: .clickable ; showLine: true; interval:10" position='0 0 0'material='color: red'></a-entity>
    </a-camera>
    <a-sky id='sky' color='white'></a-sky>
    <a-entity id='path' class='clickable' >
        <a-cylinder  id="cylinder" position="-2 0 -4" radius="0.8" height="5" rotation='0 0 90' color='green'></a-cylinder>
        <a-cylinder id="cylinder1" position="2 0 -4" radius="0.8" height="5" rotation='0 0 90' color='yellow'></a-cylinder>   
    </a-entity>
  </a-scene>
    <script>
        var scene=document.querySelector('#scene');
        var sky=document.querySelector('#sky');
        var rc=document.querySelector('#rc');
        var intersected= true;
        var c1=document.querySelector('#cylinder');
        var c2= document.querySelector('#cylinder1');
        var countIntersections=0;
        var path= new Array();
        path[0]=c1;
        path[1]=c2;
        
        
        for(var i=0; i<2; i++){
            path[i].addEventListener('raycaster-intersected', function(){
            console.log('intersezione con il path');
            countIntersections++;
            console.log('intersezione e counter= '+ countIntersections );
        })
        }
        
        for(var i=0; i<2; i++){
            path[i].addEventListener('raycaster-intersected-cleared', function(){
            console.log('fine di una intersezione con il path');
            countIntersections--;
            console.log('fine intersezione e counter= '+ countIntersections );
                if(countIntersections==0)
                console.log('sei fuori dal percorso! e counter= '+ countIntersections);
        })
        }
                            
        /*
        function waitingForEndIntersection(){
            
        }
        
        rc.addEventListener('raycaster-intersection', function(evt){
            waitingForEndIntersection;
            console.log('lunghezza= ' + evt.detail.els.length);
            var len=evt.detail.els.length;
            for(var i=0 ; i< len ; i++){
                intersected[i].emit('newIntersectionWithPath');
                countIntersections++;
            }
            sky.setAttribute('color','black'); 
        });
        
        
        
        });*/
           
       
        
    </script>
</body>