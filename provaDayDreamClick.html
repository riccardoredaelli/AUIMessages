<!DOCTYPE html>
<head>
<title>My A-Frame Scene</title>
<script src="https://rawgit.com/aframevr/aframe/master/dist/aframe-master.min.js"></script> 
<script src="https://unpkg.com/aframe-curve-component/dist/aframe-curve-component.min.js"></script> 
<script src="js/three.js"></script>
</head>
 
<body>
    <a-scene id="scene">
        <a-sphere id="sp1" radius="1" position="-6 4 -10" color="gray"></a-sphere>
        <a-sphere id="sp2" radius="2" position="-3 4 -13" color="white"></a-sphere>
        <a-sphere id="sp3" radius="1" position="2 4 -13" color="gray"></a-sphere>
        <a-sphere id="sp4" radius="1" position="6 4 -10" color="gray"></a-sphere>
        <a-sky color="pink"></a-sky>
        
        <a-entity id="controller" click-check daydream-controls="hand: right">
            <a-entity id='rc' raycaster="showLine: true; interval:10; far:100" position='0 0 0' radius='0.1'></a-entity>
        </a-entity>
    </a-scene>
    
    
    <script>
        var sp1=document.querySelector("#sp1");
        var sp2=document.querySelector("#sp2");
        var sp3=document.querySelector("#sp3");
        var sp4=document.querySelector("#sp4");
        var sp=set();
        sp.add(sp1);
        sp.add(sp2);
        sp.add(sp3);
        sp.add(sp4);
        
        var camera=document.querySelector("#controller");
        var focused= false;
        
        for(var i=0; i<4; i++){
            sp[i].setAttribute("color", "gray");
            console.log("colorato la sfera: "+i);
        }

        sp[0].addEventListener('raycaster-intersected', function () {
            if (focused) return;
            focused = true;
            sp[0].setAttribute('color','green');
        });
        sp[0].addEventListener('raycaster-intersected-cleared', function () {
            focused = false;
            sp[0].setAttribute('color','gray');
        });
        controller.addEventListener('trackpaddown', function (e) {
            sp[0].setAttribute('color','black');
        });
        controller.addEventListener('trackpadup', function (e) {
            if (focused) {
                sp[0].setAttribute('color','red');
            } else {
                sp[0].setAttribute('color','black');
            }
        });
        
    </script>
</body>